/* src/App.css */
html {
  /* PCでの基準サイズ */
  font-size: 10px; 
  /* height: 100vh; */
}

body {
  /* font-size: 10px; */
  font-family: 'Inter', sans-serif;
  background-color: #f8f8f8;
  color: #374151;
  overscroll-behavior: none; /* モバイルでの意図しないスクロールを防止 */
}

/* デッキ読み込みウィンドウ */
.deckImageCutter {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem; 
    border:1px solid #ddd;
    padding: 1rem;
    border-radius: 8px;
    font-size: clamp(12px, 1.5rem, 16px);
}

/* トップボタン間のスペース */
.space {
  margin-right: 1rem;
}

.container {
  /* width: 100vw; */
  max-width: 756px;
  padding: 0rem;
  display: flex; /* ★★★ Flexboxコンテナにする ★★★ */
  justify-content: center; /*  水平方向の中央寄せ ★★★ */
  margin: 0 auto;
}

.header {
  text-align: center;
  margin: 1rem;
}

.title {
  font-size: 2rem;
  font-weight: bold;
}
.status {
  font-size: 1.6rem;
}

.main-content {
  /* width: fit-content; */
  width: 100%;
  margin: 0;
}

/* ダイス・コインのポップアップ */
.result-popup-overlay {
  position: fixed; /* 画面全体に固定 */
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000; /* 他の要素より手前に表示 */
}

.result-popup {
  background: #f8f8f8;
  padding: 2.5rem 3rem;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.25);
}
/* */

.field-grid {
  display: grid;
  grid-template-areas:
    ". header header header header header header header ."
    ". menu menu menu menu menu menu menu ."
    ". . field monster1 monster2 monster3 grave . ."
    ". . . spell1 spell2 spell3 grave . ." 
    "hand hand hand hand hand hand hand hand hand" 
    "extra extra extra extra extra extra extra extra extra" 
    ". deck-buttons deck-buttons deck-buttons deck-buttons deck-buttons deck-buttons deck-buttons ."
    "deck deck deck deck deck deck deck deck deck"
    "free-buttons free-buttons free-buttons free-buttons free-buttons free-buttons free-buttons free-buttons free-buttons"
    "free free free free free free free free free"
    ;
  /* grid-tremplate-columns:repeat(8, 9.2rem); */
  /* width: 100%; */
  /* -width: 767px; PCでの最大幅 */
  min-width: 320px;  /* スマホでの最小幅 */
  grid-template-columns:repeat(6, 1fr) 9rem repeat(2, 1fr); 
  /* grid-tremplate-rows: auto auto 13.5rem 13.5rem 11.5rem 10rem auto 37rem; */
  /* 1. アスペクト比を設定 (例: 幅が2に対して高さが3の比率) */
  aspect-ratio: 1 / 1.5;
  /* 2. 行の高さを固定値から可変に変更 */
  grid-template-rows: auto auto 1fr 1fr 1.2fr 1.2fr auto 4fr auto 1.2fr; /* 比率を調整 */
  gap:0.8rem;
  padding:0 2rem 3rem 2rem;
  background-color: #f8f8f8;
  border-radius: 8px;
  border: 1px solid #d1d3d7;
  /* box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); */
}

/* .card {
  width: auto; /* 親のグリッドセルに対して90%の幅 */
/*aspect-ratio: 59 / 88;  遊戯王カードの一般的な比率 
height: 95%;
 /*  height: auto; 高さは自動計算に任せる */
  /* width: 8.64rem;
  height: 12.6rem; 
  border-radius: 4px;
  object-fit: cover;
  /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); 
  cursor: grab;
  position: absolute;
  touch-action: none; /* スマートフォンでのスクロール競合を防止 
  z-index: 2;
  transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out;
} */

.card {
  /* ★★★ position: absolute を relative に変更 ★★★ */
  position: relative; 
  flex-shrink: 0; /* カードがコンテナ幅に合わせて縮まないようにする */

  /* ★★★ カードの基本サイズをここで定義（rem単位がおすすめ） ★★★ */
  width: auto;
  aspect-ratio: 59 / 88;
  height: 9rem;
  border-radius: 4px;
  object-fit: cover;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: grab;
  touch-action: none;
  transition: transform 0.2s ease-in-out, filter 0.2s ease-in-out, opacity 0.2s ease-in-out;
}
/* デフォルトのカラーテーマ（ライトモード） */
:root {
  --zone-bg-default: #f9fafb;
  --zone-border-default: #d1d5db;
  --zone-bg-deck: #f3e8d7;
  --zone-border-deck: #c7b299;
  --zone-bg-hand: #e7f0f0;
  --zone-border-hand: #d1d5db;
  --zone-bg-grave : #e8e8e8;
  --zone-border-grave: #a0a0a0;
  --zone-bg-extra : #f0e6f2;
  --zone-border-extra: #c5a9cc;
  --zone-bg-monster: #fff0d6;
  --zone-border-monster: #e6c37f;
  --zone-bg-spell: #d7f3f0;
  --zone-border-spell: #7fb3ab;
  --zone-bg-field: #d7e3f3;
  --zone-border-field: #a9b9cc;
  --zone-bg-free : #e6ebf2;
  --zone-border-free: #a9b8cc;

  /* ドラッグオーバー時の色 */
  --zone-bg-over: #eef2ff;
  --zone-border-over: #6366f1;
}

.zone {
  border: 2px dashed #d1d5db;
  background-color: #f9fafb;
  border-radius: 4px;
  position: relative;
  /* overflow: hidden; */
  overflow-y: auto;
  display: flex;
  align-items:center;
  justify-content:center;
  padding: 1rem 0.8rem;

}
/* モンスターゾーンのみ overflow を解除 */
/* ★★★ 各ゾーンの基本色を定義 ★★★ */
.zone--deck {
  /* background-color: #f3e8d7;
  border-color: #c7b299; */
  background-color: var(--zone-bg-deck);
  border-color: var(--zone-border-deck);
}
.zone--deck .card {
 height: 7.2rem;
}
.zone--hand {
  /* background-color: #e7f0f0;
  border-color: #d1d5db; */
  background-color: var(--zone-bg-hand);
  border-color: var(--zone-border-hand);
}
.zone--grave {
  /* background-color: #e8e8e8;
  border-color: #a0a0a0; */
  background-color: var(--zone-bg-grave);
  border-color: var(--zone-border-grave);
  padding: 0.3rem ;
  overflow: hidden;
}

.zone--extra {
  /* background-color: #f0e6f2;
  border-color: #c5a9cc; */
  background-color: var(--zone-bg-extra);
  border-color: var(--zone-border-extra);
}
.zone--monster {
  overflow: visible;
  padding: 0;
  /* background-color: #fff0d6;
  border-color: #e6c37f; */
  background-color: var(--zone-bg-monster);
  border-color: var(--zone-border-monster);
}
.zone--spell {
  overflow: visible;
  padding: 0;
  /* background-color: #d7f3f0;
  border-color: #7fb3ab; */
  background-color: var(--zone-bg-spell);
  border-color: var(--zone-border-spell);
}
.zone--field {
  overflow: visible;
  padding: 0;
  background-color: var(--zone-bg-field);
  border-color: var(--zone-border-field);
  /* background-color: #d7e3f3;
  border-color: #a9b9cc; */
}
.zone--free {
  /* background-color: #e6ebf2;
  border-color: #a9b8cc; */
  background-color: var(--zone-bg-free);
  border-color: var(--zone-border-free);
}

.zone--menu {
  display: flex;
}

.zone-label {
  position: absolute;
  top: 0.3rem;
  right: 0.3rem;
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(2px);
  border-radius: 4px;
  /* font-size: 1.2rem; */
  font-size: clamp(14px, 1.5rem, 16px);
  padding: 0.2rem;
  font-weight: 600;
  text-align: center;
  color: #374151;
  z-index: 999;
  user-select: none;
}
.zone--grave .zone-label:hover {
  opacity: 0.8;
}
.card-stack {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  flex-wrap: wrap; /* ← これが自動折り返しの設定です */
  align-content: flex-start; /* 折り返した要素を上から詰める */
  gap: 0.5rem; /* カード同士の間隔 */
  padding-right: 3rem;
}

.zone--monster .card-stack,
.zone--spell .card-stack,
.zone--field .card-stack {
  padding-right: 0;
  overflow-y: initial; 
}

.single-card-zone {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  z-index: 2;
}

.operation-button {
  color: #374151;
  background-color: #e7f0f0;
  border: 2px solid #d1d5db;
  border-radius: 4px;
  padding:0.5rem 0.8rem;
  font-size: clamp(12px, 1.5rem, 16px);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  align-items: center;
  justify-content: center;
}

.operation-button:hover {
    background-color: #d2d7e0;
    border-color: #9298a3;
}

.top-menu {
  /* border: 2px solid #d1d5db; */
  min-width: 20%;
  margin:0 1rem 0.5rem 0;
  display: inline-flex;
}
.deck-menu {
  background-color: #f3e8d7;
  border: 2px solid #e6c37f;
  min-width: 30%;
  margin:0.4rem 0;
  display: flex;
}

.deck-buttons-container {
  grid-area: deck-buttons;
  display: flex;
  /* flex-direction: column; */
  justify-content:space-between;
  /* gap: 10px; */
}
.free-buttons-container {
  grid-area: free-buttons;
  display: flex;
  /* flex-direction: column; */
  justify-content:flex-end;
  gap: 2em;
  margin-top: 1em;
}

.free-menu {
  background-color: #e6ebf2;
  border-color: #a9b8cc;
}

/* .top-menu:hover,
.deck-menu:hover {
    background-color: #d2d7e0;
    border-color: #9298a3;
} */

.popup-overlay {
  grid-area: grave; /* 墓地ゾーンと同じグリッドエリアを指定 */
  z-index: 1000;    /* 他の要素より手前に表示 */
  width: 250%;
  height:120%;
/* background-color: rgba(0, 0, 0, 0.6); */
  /* position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0; */
  /* background-color: rgba(0, 0, 0, 0.6); */
  display: flex;
  /* align-itrems: center; */
  /* justify-content:end; */
}

.popup {
  background-color: #eeeeee;
  padding: 0.8rem;
  border-radius: 4px;
  width: 100%;
  height: 180%; 
  border: 3px solid #b8b8b8;
  display: flex;
  flex-direction: column;
}

.popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  color: #1f2937;
}

.popup-title {
  font-size: 1.8rem;
  font-weight: bold;
}

.close-button {
  background: none;
  border: none;
  color: #6b7280;
  /* font-size: clamp(16px, 2rem, 20px); */
  font-weight: bold;
  cursor: pointer;
  height: 2rem;
}

.popup-content {
  flex: 1;
  overflow-y: auto;
  position: relative;
  padding: 0.8rem;
  background-color: #dedede;
  border-radius: 8px;
}

.context-menu {
  position: fixed;
  background-color: #eeeeee;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  z-index: 10000;
  width: 180px;
  overflow: hidden;
}

.context-menu-button {
  display: block;
  width: 100%;
  background: none;
  border: none;
  padding: 10px 15px;
  text-align: left;
  cursor: pointer;
}

.context-menu-button:hover {
    background-color: #b9b9b9;
}

.red {
  background-color: #ffc9c9;
  border-color: #cca9a9;
}
.blue {
  background-color: #b7e0ff;
}

footer p {
  margin:3rem 0;
  text-align: center;
  font-size: clamp(12px, 1.2rem, 14px);
}
footer  a {
  text-decoration: none;
  color: #d0a1a1;
}
footer  a:hover {
  opacity: 0.7;
}

.display {
  display: flex;
}

@media screen and (max-width: 767px) {
  html {
    /* スマートフォンでの基準サイズ */
    font-size: 9px;
  }
}
@media screen and (max-width: 680px) {
  html {
    font-size: 8px;
  }
}
@media screen and (max-width: 576px) {
  .header {
  margin:3rem 1rem;
}

  .field-grid {
  display: grid;
  grid-template-areas:
    "header header header header header header"
    "menu menu menu menu menu menu"
    "field monster1 monster2 monster3 grave ."
    ". spell1 spell2 spell3 grave ." 
    "hand hand hand hand hand hand" 
    "extra extra extra extra extra extra" 
    "deck-buttons deck-buttons deck-buttons deck-buttons deck-buttons deck-buttons"
    "deck deck deck deck deck deck"
    "free-buttons free-buttons free-buttons free-buttons free-buttons free-buttons"
    ". free free free free free";
  grid-template-columns: repeat(6, 1fr);
  aspect-ratio: 1 / 2.1;
  /* 2. 行の高さを固定値から可変に変更 */
  grid-template-rows: auto auto 1fr 1fr 1fr 1fr auto 3.5fr auto 1fr; /* 比率を調整 */
  gap: 1.5rem 1rem;
  }
  .card {
    height: 10rem;
  }
  .zone--extra .card {
    height: 9rem;
  }
  .zone--deck .card {
    height: 7.5rem;
  }
  .popup-overlay {
  width: 220%;
}
}
@media screen and (max-width: 490px) {
  html {
    /* スマートフォンでの基準サイズ */
    font-size: 7px;
  }

.card-stack {
  padding-right: 4rem;
}
}
@media screen and (max-width: 450px) {
  .space {
  margin-right:0;
}
   .field-grid {
  grid-template-columns: repeat(6, 1fr);
  aspect-ratio: 1 / 2.3;
  /* 2. 行の高さを固定値から可変に変更 */
  grid-template-rows: auto auto 1fr 1fr 1.1fr 1.1fr auto 3.5fr auto 1.1fr; /* 比率を調整 */
  }
  /* .card {
    height: 9rem;
  } */
  .zone--extra .card {
    height: 8.5rem;
  }
  /* .zone--deck .card {
    height: 7.2rem;
  } */
  /* .top-menu {
  padding:0.5rem 0.6rem;
  margin: 0.8rem;
  font-weight: bold;
  width: fit-content;
  }

  .deck-menu {
  padding:0.6rem 0.5rem;
  margin:0.8rem;
  font-weight: bold;
  width:fit-content;
  } */
  .operation-button{
  padding:0.5rem 0.3rem;
  margin: 0.8rem;
  font-weight: bold;
  width: fit-content;
  }
  .top-menu {
  padding:0.5rem 0.6rem;
  }
}

@media screen and (max-width: 400px) {
  html {
    /* スマートフォンでの基準サイズ */
    font-size: 6.2px;
  }
  .popup-overlay {
    height: 140%;
  }
}
@media screen and (max-width: 380px) {
  .field-grid {
   grid-template-areas:
    "header header header header header"
    "menu menu menu menu menu"
    "field monster1 monster2 monster3 grave"
    ". spell1 spell2 spell3 grave" 
    "hand hand hand hand hand" 
    "extra extra extra extra extra" 
    "deck-buttons deck-buttons deck-buttons deck-buttons deck-buttons"
    "deck deck deck deck deck"
    "free-buttons free-buttons free-buttons free-buttons free-buttons"
    ". free free free free";
  grid-template-columns: repeat(5, 1fr);
  aspect-ratio: 1 / 2.5;
  /* 2. 行の高さを固定値から可変に変更 */
  grid-template-rows: auto auto 1fr 1fr 1.2fr 1.2fr auto 3fr auto 1.2fr; /* 比率を調整 */
  }
  .card {
    height: 9rem;
  }
  .zone--deck .card {
    height: 6rem;
  }
  .zone--extra .card {
    height: 7.2rem;
  }
}
@media screen and (max-width: 335px) {
  .display {
  display: block;
} 
}

/* ダークモード */
@media (prefers-color-scheme: dark) {
  body {
    background-color: #444444;
    color: #dbdbdb;
  }
  .deckImageCutter{
    background-color: #5b5b5b;
    color: #dbdbdb;
  }
  .field-grid {
    background-color: #444444;
  }
  .result-popup {
  background-color: #555555;
}
.operation-button {
  background-color: #5b696c;
  color: #dbdbdb;
  border: 2px solid #d1d5db;
}
.deck-menu {
  background-color: #726249;
  border: 2px solid #e6c37f;
}
.red {
  background-color: #633f3f;
  border-color: #cca9a9;
}

:root {
  --zone-bg-default: #4d4545;
  --zone-border-default: #d1d5db;
  --zone-bg-deck: #726249;
  --zone-border-deck: #c7b299;
  --zone-bg-hand: #2b4f4f;
  --zone-border-hand: #d1d5db;
  --zone-bg-grave : #4f4949;
  --zone-border-grave: #a0a0a0;
  --zone-bg-extra : #534156;
  --zone-border-extra: #c5a9cc;
  --zone-bg-monster: #726249;
  --zone-border-monster: #e6c37f;
  --zone-bg-spell: #2a4e4a;
  --zone-border-spell: #7fb3ab;
  --zone-bg-field: #2e3a4a;
  --zone-border-field: #a9b9cc;
  --zone-bg-free : #2b3645;
  --zone-border-free: #a9b8cc;

  /* ドラッグオーバー時の色 */
  --zone-bg-over: #56667f;
  --zone-border-over: #788daf;
}
/* .zone {
  background-color: #4d4545;
}
.zone--deck {
  background-color: #726249;
  border-color: #c7b299;
}
.zone--hand {
  background-color: #2b4f4f;
  border-color: #d1d5db;
}
.zone--grave {
  background-color: #4f4949;
  border-color: #a0a0a0;
}
.zone--extra {
  background-color: #534156;
  border-color: #c5a9cc;
}
.zone--monster {
  background-color: #726249;
  border-color: #e6c37f;
}
.zone--spell {
  background-color: #2a4e4a;
  border-color: #7fb3ab;
}
.zone--field {
  background-color: #2e3a4a;
  border-color: #a9b9cc;
}
.zone--free {
  background-color: #2b3645;
  border-color: #a9b8cc;
}  */
.operation-button:hover {
    background-color: #8793a9;
    opacity: 0.8;
    border-color: #9298a3;
}
.context-menu-button:hover {
    background-color: #6d5353;
    opacity: 0.8;
}
.popup { 
  background-color: #7b7b7b;
  border-color: #4f4949;
}
.popup-content { 
  background-color: #4f4949;
}
.close-button {
  color: #dbdbdb;
}
}