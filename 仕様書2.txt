●遊戯王ラッシュデュエル一人回しツールについて
・カードゲーム「遊戯王ラッシュデュエル」の一人回しツールを、PCとスマートフォンでの使用を想定し作成したい。
・スマートフォンでドラッグ＆ドロップの挙動を安定させるためライブラリ @dnd-kit/core + @dnd-kit/sortable を用いる。

●基本的な挙動
１．デッキレシピの画像を一つ、もしくは二つ取得する。
完全一人回しの場合は一つ。疑似的にデュエルをする場合は二つのデッキレシピ画像が必要になる。

２．デッキ枚数、デッキレシピのカード画像を取得 ⇒ メインデッキをシャッフルし、デッキゾーンにセット

３．手札（初手４枚）、デッキ（枚数記載）、EXデッキ（枚数記載）、墓地（枚数記載、初手0）
をそれぞれの場所にセット

・デュエルフィールドは下記で構成されている。
①モンスターゾーン：モンスターを召喚・特殊召喚・セットする場所（3つ）
②魔法＆罠ゾーン：魔法・罠カードを発動・セットする場所（3つ）
③フィールドゾーン：フィールド魔法を発動・セットする場所（1つ）
④エクストラデッキゾーン：デッキに入れない特別なカードを裏側で置く場所（1つ）
⑤墓地：破壊されたり使い終わったカードを表側で置く場所（1つ）
⑥デッキゾーン：自分のデッキを裏側で置く場所（1つ）

・基本的にはカード画像を表面で配置する。
モンスターゾーン・魔法＆罠ゾーン・フィールドゾーンに配置されたカードを長押し選択（PCは右クリック）するとカードの表示形式を変更できるボタンが現れる。

・モンスターゾーンに配置されているカード画像を長押し（PC時は右クリック）した場合、「表示形式を変更」「裏側守備表示にする」の2つのボタンが出現。
ボタンをクリックした時、下記ルールで表示形式を変更する。
◆表示形式を変更
①回転していない画像の場合、左に90度回転（表側守備表示）
②左に90度回転（表側守備表示）状態のカードは、右に90度回転（攻撃表示）
③裏側守備表示状態のカードについては画像にかけたオーバーレイを解除し、右に90度回転（攻撃表示）。

◆裏側守備表示
左に90度回転した状態で画像を暗くする（黒色をオーバーレイする等）。

・フィールドゾーン・魔法＆罠ゾーンに配置されているカード画像を長押し（PC時は右クリック）した場合
「表示形式を変更」のボタンが出現。ボタンをクリックした時、下記ルールで表示形式を変更する。
①回転せず画像を暗くする（黒色をオーバーレイする）
②①の状態の場合は、画像にかけたオーバーレイを解除。

※UIについては https://duel-simulator.pages.dev/ を参考にする。
※ツールの挙動については https://fugarta.github.io/solo-mode/ を参考にする。

●設計ルールや実装内容について
・デッキレシピ読み込み直後の状態に戻す「リセット」ボタン実装。クリックすると「全てリセットしますか？」のアラートが出る。
・一つ前の操作に戻る、「戻る」ボタンを実装。
・「手札」ゾーンの横に「一枚ドロー」ボタン、「一枚ランダムに捨てる」ボタンを実装。
・「デッキ」を長押しすると「デッキをシャッフル」ボタンが出てくる。クリックするとデッキ内のカードの並び順をランダムに変更する。
・サイコロ（ランダムで1～6の数字を取得）・コイン（ランダムで表か裏を取得）機能の実装。
・カードを操作するのはプレイヤーのため、カード情報のjsonは不要。あくまでもカード画像を見て、プレイヤーが自らルールに則った操作を行うものとする。

●デッキレシピ画像からカード切り出しを行うルーについて。
デッキレシピ画像は下記のような構成になっている。

------------------------
デッキ名               ｜
------------------------
メインデッキ：x枚      ｜
------------------------
□□□□□□□□□□
□□□□□□□□□□
↑カード画像は一段10枚が並んでおり
メインデッキは40～60枚、つまり4～6列の構成
------------------------
エクストラデッキ：y枚  ｜
------------------------
□□□□□□□□□□
↑カード画像は一段10枚が並んでおり
エクストラデッキは0～15枚、つまり0～2列の構成
------------------------ 

・レシピ画像を出力するデバイスによって画像サイズが異なる。
そのためまずは画像幅を 1080px に変更する（高さについてもアスペクト比を合わせて縮小）
・まずメインデッキの枚数をOCRで取得し、その分のカード画像を切り出す。
メインデッキ枚数については、画像の上から72px～ ＋48px の位置で読み取る。
X方向については左から 45px～260px の位置。
・切り出すカード画像の横幅はデッキレシピ横幅 1080px を10等分。
カード高さについては横幅の1.42倍のサイズとする。

・その後、メインデッキ枚数により下記の位置でエクストラデッキの枚数をOCRで読み取り、その枚数分のカード画像を切り出す。
メインデッキ40枚：735px ～ ＋48px
メインデッキ41～50枚：890px～ ＋48px
メインデッキ51～60枚：1042px～ ＋48px
※X方向については左から 45px～315px で同じ。

・うまく読み込めない場合を想定し、ユーザー側でもx、yの数を変更し、カード画像切り出しやり直せる仕様も組み込みたい。

●カード画像移動ルール。
・デッキ、エクストラデッキ、手札、フィールド、モンスター、魔法＆罠、墓地（ポップアップ内の墓地ゾーン含む）ゾーンのカード画像はドラッグ＆ドロップで移動可能。
・メインデッキについては、デッキトップ（デッキの一番初め）、もしくはデッキボトム（デッキの一番最後）にはカードを移動できるようにしたい。
・カード画像を移動した場合、移動先のゾーンにカード画像が表示され、移動元からはカード画像が消える。
・カードを画像移動をキャンセルした場合、移動先のゾーンにカード画像が表示されず、移動元のカード画像はそのまま残る。
・カード画像の総数は途中で変更されることはない。















お疲れ様ですエシマです。音沙汰なくてすみません！
PCでの挙動はOKだったのですがスマホで全く動かなかったので、ひたすら修正しまくっていたら時間を取られました。

ひとまずデッキ一つ分のみの一人回しツールができましたので、こちらで共有させていただきます。

一人回しツール（pre版）：
使い方：

一つ注意点があるのですが、こちらはスマホからニューロンで「画像共有」で作成したデッキレシピ画像のみしか読み取れません。
というのも「メインデッキ：X枚」「エクストラデッキ：Y枚」の枚数の部分を読み取って切り出しを行っているためです。
読み取る位置をピンポイントで幅と高さ指定しているため、ほかのレイアウトだと読み込み不可となります。

新しく「不具合・バグ報告」「ご意見・ご要望」のチャンネルを開放しましたので、何かありましたらそちらにご連絡お願い致します！
